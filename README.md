# ADISE24_Koutsiamanis
https://users.it.teithe.gr/~it174858/ADISE24_Koutsiamanis/qwirkle.php

### Εντολές για το Qwirkle

#### 1. **Έναρξη παιχνιδιού**
- **Endpoint:** `/board/start`
- **Μέθοδος:** `POST`

```bash
curl -X POST https://users.iee.ihu.gr/~it174858/ADISE24_Koutsiamanis/qwirkle.php/board/start
```

#### 2. **Τοποθέτηση πλακιδίου**
- **Endpoint:** `/board/place`
- **Μέθοδος:** `POST`
- **Σώμα:** JSON

```bash
curl -X POST https://users.iee.ihu.gr/~it174858/ADISE24_Koutsiamanis/qwirkle.php/board/place \
-d '{"tiles": [{"color": "red", "shape": "circle", "position": {"x": 0, "y": 0}}]}'
```

#### 3. **Ανάκτηση του πίνακα (board)**
- **Endpoint:** `/board`
- **Μέθοδος:** `GET`

```bash
curl -X GET https://users.iee.ihu.gr/~it174858/ADISE24_Koutsiamanis/qwirkle.php/board
```

#### 4. **Σύνδεση παίκτη (login)**
- **Endpoint:** `/player`
- **Μέθοδος:** `POST`
- **Σώμα:** JSON

```bash
curl -X POST https://users.iee.ihu.gr/~it174858/ADISE24_Koutsiamanis/qwirkle.php/player \
-d '{"username": "Player1"}'
```

#### 5. **Επαναφορά του board** (χρήση του `clean_board` procedure)
- **Endpoint:** `/board/reset`
- **Μέθοδος:** `POST`

```bash
curl -X POST https://users.iee.ihu.gr/~it174858/ADISE24_Koutsiamanis/qwirkle.php/board/reset
```

### Περιγραφή Πινάκων Βάσης Δεδομένων

#### **1. Players**
- **name**: Το όνομα του παίκτη (μοναδικό).
- **token**: Ένα μοναδικό αναγνωριστικό για τον παίκτη.
- **score**: Η τρέχουσα βαθμολογία του παίκτη.

#### **2. Tiles**
- **color**: Το χρώμα του πλακιδίου.
- **shape**: Το σχήμα του πλακιδίου.
- **owner**: Ο παίκτης που κατέχει το πλακίδιο.
- **placed**: Κατάσταση τοποθέτησης (TRUE/FALSE).

#### **3. Board**
- **x**: Η θέση του πλακιδίου στον άξονα Χ.
- **y**: Η θέση του πλακιδίου στον άξονα Υ.
- **color**: Το χρώμα του πλακιδίου.
- **shape**: Το σχήμα του πλακιδίου.

#### **4. Games**
- **player1**: Το όνομα του πρώτου παίκτη.
- **player2**: Το όνομα του δεύτερου παίκτη.
- **current_player**: Ο παίκτης που παίζει αυτή τη στιγμή.
- **status**: Η κατάσταση του παιχνιδιού (`started`, `ended`).
- **winner**: Ο νικητής του παιχνιδιού.

### Ανάλυση Functions στο `board.php`

#### **1. `getBoard()`**
- Επιστρέφει την τρέχουσα κατάσταση του πίνακα (board) ταξινομημένη κατά συντεταγμένες `x` και `y`.
- **Λογική:**
  - Εκτελεί ένα `SELECT` στον πίνακα `board` για να λάβει όλα τα τοποθετημένα πλακίδια.
  - Επιστρέφει τη λίστα των πλακιδίων ή ένα μήνυμα σφάλματος αν αποτύχει.

---

#### **2. `startGame()`**
- Ξεκινά ένα νέο παιχνίδι με δύο παίκτες.
- **Λογική:**
  - Ελέγχει αν υπάρχουν δύο παίκτες στον πίνακα `players`.
  - Εκκαθαρίζει τον πίνακα `board` με τη χρήση της stored procedure `clean_board()`.
  - Δημιουργεί μια νέα εγγραφή στον πίνακα `games`.
  - Εκχωρεί 6 προκαθορισμένα πλακίδια σε κάθε παίκτη από τον πίνακα `tiles`.

---

#### **3. `assignTilesToPlayer($player, $tiles)`**
- Εκχωρεί μια λίστα από προκαθορισμένα πλακίδια σε έναν παίκτη.
- **Λογική:**
  - Ενημερώνει τον πίνακα `tiles`, ορίζοντας τον παίκτη ως ιδιοκτήτη για τα συγκεκριμένα πλακίδια.
  - Ελέγχει ότι κάθε πλακίδιο δεν έχει ήδη εκχωρηθεί.

---

#### **4. `assignNewTile($playerName)`**
- Εκχωρεί ένα νέο τυχαίο πλακίδιο σε έναν παίκτη.
- **Λογική:**
  - Επιλέγει ένα μη τοποθετημένο πλακίδιο (`placed = FALSE`) από τον πίνακα `tiles`.
  - Αναθέτει το πλακίδιο στον παίκτη.
  - Επιστρέφει το νέο πλακίδιο ή μήνυμα σφάλματος αν δεν υπάρχουν διαθέσιμα πλακίδια.

---

#### **5. `placeTiles($tiles)`**
- Τοποθετεί ένα ή περισσότερα πλακίδια στον πίνακα (board).
- **Λογική:**
  - Ελέγχει τον τρέχοντα παίκτη από τον πίνακα `games`.
  - Καλεί τη stored procedure `place_tile` για να τοποθετήσει τα πλακίδια.
  - Υπολογίζει τους πόντους για κάθε τοποθέτηση με τη `calculatePoints()`.
  - Ενημερώνει τους πόντους του παίκτη.
  - Ελέγχει αν όλα τα πλακίδια έχουν τοποθετηθεί (`placed = TRUE`) και, αν ναι, καταγράφει τον νικητή.
  - Εκχωρεί νέο πλακίδιο στον παίκτη.

---

#### **6. `calculatePoints($x, $y)`**
- Υπολογίζει τους πόντους που κερδίζονται από την τοποθέτηση ενός πλακιδίου.
- **Λογική:**
  - Μετρά τα πλακίδια που βρίσκονται στην ίδια γραμμή και στήλη με το νέο πλακίδιο.
  - Προσθέτει επιπλέον 6 πόντους αν σχηματιστεί γραμμή ή στήλη 6 πλακιδίων (Qwirkle).

---

